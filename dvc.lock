schema: '2.0'
stages:
  make_dataset:
    cmd: python3 src/data/make_dataset.py data/raw/annotations data/interim/annotations.csv
    deps:
    - path: data/raw/annotations
      md5: 3adb0ed65147d9ea49f863bc06b7bdcd.dir
      size: 1576046
      nfiles: 853
    - path: src/data/make_dataset.py
      md5: 0d03c32a5b532ff4b73be024bea43202
      size: 2671
    outs:
    - path: data/interim/annotations.csv
      md5: 23930ef35eae8a5ad4c573a056289310
      size: 200129
  create_crop_dataset:
    cmd: python3 src/data/create_crop_dataset.py data/interim/annotations.csv  data/raw/images/  data/processed/cropped_images/
    deps:
    - path: data/interim/annotations.csv
      md5: 23930ef35eae8a5ad4c573a056289310
      size: 200129
    - path: data/raw/images
      md5: 354962b3b72da69dc64ca74fd428a5a7.dir
      size: 416311262
      nfiles: 853
    - path: src/data/create_crop_dataset.py
      md5: 6435b44f9a319de1c5dbe72f6e564382
      size: 1307
    outs:
    - path: data/processed/cropped_images
      md5: 4c0c0f8fd61e284981e3b700945b9f83.dir
      size: 16469041
      nfiles: 4072
  train_test_split:
    cmd: python3 src/models/train_test_split.py data/processed/cropped_images/ data/processed/train_data/
    deps:
    - path: data/processed/cropped_images/
      md5: 4c0c0f8fd61e284981e3b700945b9f83.dir
      size: 16469041
      nfiles: 4072
    - path: src/models/train_test_split.py
      md5: 109280a5306c05030fbd4d82ff04d5a0
      size: 1891
    outs:
    - path: data/processed/train_data/
      md5: c4ab15ee0120ceeb17dc74d89629e324.dir
      size: 16530640
      nfiles: 4070
  train_model:
    cmd: python3 src/models/train.py data/processed/train_data/ src/models/configs/resnet.yaml
      models/resnet
    deps:
    - path: data/processed/train_data/
      md5: c4ab15ee0120ceeb17dc74d89629e324.dir
      size: 16530640
      nfiles: 4070
    - path: src/models/configs/resnet.yaml
      md5: b0adfe1f9b92f9a213e4ce805da006cc
      size: 65
    - path: src/models/train.py
      md5: e1ac17ce2ab3a95feca120a2b71ad59c
      size: 3275
    outs:
    - path: models/resnet
      md5: 955e6d52c80512a378f7af2439c2a884.dir
      size: 94392651
      nfiles: 6
  validate_model:
    cmd: python3 src/models/validate.py  models/resnet/data/model.pth data/processed/train_data/val
      src/models/configs/resnet.yaml
    deps:
    - path: data/processed/train_data/val
      md5: 55050f293241abaf10a24c9b68a0e9ae.dir
      size: 1555749
      nfiles: 407
    - path: models/resnet/data/model.pth
      md5: e50487325f5b600d02e0c86f59e3a0f6
      size: 94391809
    - path: src/models/validate.py
      md5: 15d9860f8967ec6face19c177b7387d6
      size: 2725
